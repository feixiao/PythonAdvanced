# 多任务的重要概念

## 一.并发|并行

### 1.并发(Concurrent)

并发是指多个任务看似同时执行，但它们不一定在同一时刻都在处理，它们可能会交替执行或通过时间片轮转进行切换。

并发通常用于在一个有限的资源（如单一 CPU 核心）上同时执行多个任务，以提高系统的效率和响应性。

在并发任务中，任务之间可能会相互干扰或竞争资源，因此需要使用同步机制来协调它们的执行。

### 2.并行(Parallel)

并行是指多个任务同时执行，它们在同一时刻都在进行处理，每个任务有自己的处理单元（如 CPU 核心）。

并行通常用于利用多核处理器或多个计算资源以提高任务的执行速度。

在并行任务中，每个任务是真正同时进行的，不需要等待其他任务完成。

### 3.并行与并发区别

并行是真正的同时执行多个任务，每个任务有自己的处理单元，没有时间上的交叉。

并发是多个任务看似同时执行，但它们可以在时间上交替执行，共享同一资源。

## 二.阻塞|非阻塞

### 1.阻塞(Blocking)

阻塞是指当一个任务执行时，它会等待某个事件或条件发生，而不会继续执行下一个任务。

在阻塞模式下，任务会一直等待，直到条件满足或事件发生，然后才继续执行。

阻塞通常用于同步编程模型，任务按照顺序执行，等待前一个任务完成后才执行下一个任务。

阻塞可以确保任务在特定条件下执行，但可能导致程序在等待时浪费时间。

### 2.非阻塞(Non-blocking)

非阻塞是指当一个任务执行时，如果不能立即完成，它会立即返回，并允许程序继续执行其他任务，而不是等待。

在非阻塞模式下，任务不会停滞等待，而是会通过轮询或回调等机制来检查条件或事件是否满足，然后继续执行。

非阻塞通常用于异步编程模型，允许程序同时执行多个任务，处理并发操作。

非阻塞可以提高程序的响应性和性能，但需要额外的逻辑来处理任务之间的协调和同步。

### 3.阻塞与非阻塞的区别

阻塞会导致任务等待，直到条件满足或事件发生。

非阻塞允许任务在等待时继续执行其他任务，并通过轮询或回调等方式来检查条件或事件

## 三.同步|异步

### 1.同步(Sync)

在同步编程中，任务按照严格的顺序执行，一个任务必须等待前一个任务完成后才能开始执行。

同步操作是阻塞的，即在执行某个任务时，程序会等待该任务完成后再继续执行下一个任务。

同步通常用于处理简单的顺序任务，易于理解和调试，但在处理多任务或 I/O 密集型操作时，可能会导致性能问题，因为任务的执行会受到等待的限制。

### 2.异步(Async)

在异步编程中，任务可以并发执行，一个任务不必等待另一个任务的完成，而是可以继续执行其他任务。

异步操作是非阻塞的，即在执行某个任务时，程序不会等待该任务完成，而会继续执行后续任务。

异步通常用于处理并发操作、I/O 密集型任务、网络通信等需要非阻塞和高响应性的情况。异步编程可以提高程序的性能和资源利用率。

### 3.同步与异步区别

同步是按照严格的顺序执行任务，一个接一个地执行，等待前一个任务完成。

异步是任务可以并发执行，不需要等待其他任务完成，可以在等待时继续执行其他任务。

## 四.四种术语

举个简单的例子来描述这四种情况，老张要做两件事，用水壶烧开水，看电视，两件事情即两个任务，两个函数。

### 1.同步阻塞(Synchronous Blocking)

老张把水壶放到火上，就坐在那里等水开，开了之后我再去看电视。

### 2.同步非阻塞(Synchronous Non-blocking)

老张把水壶放到火上，去客厅看电视，时不时去厨房看看水开没有。

### 3.异步阻塞(Asynchronous Blocking)

老张把响水壶放到火上，然后就坐在旁边等着听那个烧开的提示音。

### 4.异步非阻塞(Asynchronous Non-blocking)

老张把响水壶放到火上，去客厅看电视，水壶响之前不再去看它了，响了再去拿壶。

> 同步|异步,指的是消息通知的机制。区别在哪里呢？
>
> 在这个例子中同步异步只是对于水壶而言。在使用普通水壶的时候，我要自己主动去观察水是不是烧开了，自己主动去获取烧开的这个结果，即所谓的同步；但是在响水壶的时候，我不需要再管水烧到什么程度了，因为只要水烧开了，那个滴滴的噪声就会通知我的，即所谓的异步。他们的相同点是，在烧水的过程中，老王啥也没干，即“阻塞”。

## 五.总结

**同步阻塞形式:** 效率是最低的。拿上面的例子来说，在烧水的过程中，什么别的事都不做。

**同步非阻塞形式:** 实际上是效率低下的。因为老王需要不断的在看电视与烧水之间来回跑动，看一下电视，又要去看一下水烧开没有，这样来回跑很多次，在程序中，程序需要在这两种不同的行为之间来回的切换，效率可想而知是低下的。

**异步阻塞形式:** 异步操作是可以被阻塞住的，只不过它不是在处理消息时阻塞，而是在等待消息通知时被阻塞。 这个效率其实跟同步阻塞差不多的。

**异步非阻塞形式:** 效率更高。因为老王把水烧好之后就不用管了，可以安安心心去看电视，不用来回奔波看水烧开了没，因为水烧开了会有提示告诉他水烧好了，这样效率岂不是更高。

那有没有更好的办法？当然有，如果老王还有一个帮手老张，让老王自己看电视、同时老张去烧开水，这样岂不是更好？这就是所谓的并行
